<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="MapillaryJS" href="/mapillary-js/opensearch.xml"><title data-react-helmet="true">Coordinate Systems | MapillaryJS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://mapillary.github.io/mapillary-js/docs/theory/coordinates"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Coordinate Systems | MapillaryJS"><meta data-react-helmet="true" name="description" content="3D Coordinates"><meta data-react-helmet="true" property="og:description" content="3D Coordinates"><link data-react-helmet="true" rel="shortcut icon" href="/mapillary-js/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://mapillary.github.io/mapillary-js/docs/theory/coordinates"><link data-react-helmet="true" rel="alternate" href="https://mapillary.github.io/mapillary-js/docs/theory/coordinates" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mapillary.github.io/mapillary-js/docs/theory/coordinates" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/mapillary-js/assets/css/styles.7bdd1c50.css">
<link rel="preload" href="/mapillary-js/assets/js/runtime~main.5ac90abc.js" as="script">
<link rel="preload" href="/mapillary-js/assets/js/main.8e27731d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mapillary-js/"><img src="/mapillary-js/img/logo_green.svg" alt="MapillaryJS" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mapillary-js/img/logo_green.svg" alt="MapillaryJS" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">MapillaryJS</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mapillary-js/docs">Docs</a><a class="navbar__item navbar__link" href="/mapillary-js/api">API</a><a class="navbar__item navbar__link" href="/mapillary-js/examples">Examples</a><a href="https://github.com/mapillary/mapillary-js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Main Concepts</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Extension</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Theory</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/theory/theory">Theory</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mapillary-js/docs/theory/coordinates">Coordinates</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/theory/navigation-graph">Navigation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/mapillary-js/docs/theory/polygon-triangulation">Triangulation</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Migration</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Coordinate Systems</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="3d-coordinates"></a>3D Coordinates<a class="hash-link" href="#3d-coordinates" title="Direct link to heading">#</a></h2><p>Throughout MapillaryJS, two 3-dimensional coordinate systems are used; <a href="https://en.wikipedia.org/wiki/Geodetic_datum" target="_blank" rel="noopener noreferrer">Geodetic (WGS84)</a> and <a href="https://en.wikipedia.org/wiki/Local_tangent_plane_coordinates" target="_blank" rel="noopener noreferrer">Local Topocentric East, North, Up (ENU)</a>.</p><p>When interacting with the MapillaryJS API you will generally use Geodetic coordinates. In some situations such as when writing custom renderers, you will most probably work with both and convert between them.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>MapillaryJS provides helper functions for <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_conversion" target="_blank" rel="noopener noreferrer">geographic coordinates conversion</a> through the <a href="/mapillary-js/api/modules/api#enutogeodetic">enuToGeodetic</a> and <a href="/mapillary-js/api/modules/api#geodetictoenu">geodeticToEnu</a> functions.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="geodetic-coordinates"></a>Geodetic Coordinates<a class="hash-link" href="#geodetic-coordinates" title="Direct link to heading">#</a></h3><p>The WGS84 datum has longitude (degrees), latitude (degrees) and altitude (meters) values.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="local-topocentric-coordinates"></a>Local Topocentric Coordinates<a class="hash-link" href="#local-topocentric-coordinates" title="Direct link to heading">#</a></h3><p>In the <em>ENU</em> (or <em>World</em>) reference frame the x-axis points to East, the y-axis to North and the z-axis up. All values are represented in meters.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="conversion"></a>Conversion<a class="hash-link" href="#conversion" title="Direct link to heading">#</a></h3><p>Coordinates can be converted between the <em>geodetic</em> and <em>local topocentric</em> coordinates like so.</p><table><thead><tr><th>Geodetic</th><th>ENU</th><th>Topocentric</th><th>Direction</th></tr></thead><tbody><tr><td>Longitude</td><td>East</td><td>X</td><td>Right</td></tr><tr><td>Latitude</td><td>North</td><td>Y</td><td>Forward</td></tr><tr><td>Altitude</td><td>Up</td><td>Z</td><td>Up</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="local-camera-coordinates"></a>Local Camera Coordinates<a class="hash-link" href="#local-camera-coordinates" title="Direct link to heading">#</a></h3><p>When writing data provider extensions, you will also need to handle <a href="https://www.opensfm.org/docs/cam_coord_system.html" target="_blank" rel="noopener noreferrer">Local camera coordinates</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="2d-coordinates"></a>2D Coordinates<a class="hash-link" href="#2d-coordinates" title="Direct link to heading">#</a></h2><p>MapillaryJS also works with a number of different 2D coordinate systems.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="container-pixel-coordinates"></a>Container Pixel Coordinates<a class="hash-link" href="#container-pixel-coordinates" title="Direct link to heading">#</a></h3><p>Pixel coordinates are coordinates on the viewer container. The origin is in the top left corner of the container. The axes are directed according to the following for a viewer container with a width of 640 pixels and height of 480 pixels.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(0,0)                          (640, 0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     +------------------------&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     |</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     |</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     |</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     v                        +</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(0, 480)                       (640, 480)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="basic-image-coordinates"></a>Basic Image Coordinates<a class="hash-link" href="#basic-image-coordinates" title="Direct link to heading">#</a></h3><p>Basic image coordinates represents points in the original image adjusted for orientation. They range from 0 to 1 on both axes. The origin is in the top left corner of the image and the axes are directed according to the following for all image types.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(0,0)                          (1, 0)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     +------------------------&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     |</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     |</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     |</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     v                        +</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(0, 1)                         (1, 1)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For every camera viewing direction it is possible to convert between these two coordinate systems for the current image. The image can be panned and zoomed independently of the size of the viewer container resulting in different conversion results for different viewing directions</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="additional-information"></a>Additional Information<a class="hash-link" href="#additional-information" title="Direct link to heading">#</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>See the <a href="https://www.opensfm.org/docs/geometry.html#coordinate-systems" target="_blank" rel="noopener noreferrer">OpenSfM coordinate system documentation</a> for additional information about <em>Normalized image coordinates</em> (or <em>OpenSfM coordinates</em>), <em>Upright image coordinates</em> (or <em>Basic cordinates</em>), <em>World coordinates</em>, and <em>Local camera coordinates</em>.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mapillary/mapillary-js/edit/main/doc/docs/theory/coordinates.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mapillary-js/docs/theory/theory"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Theory</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/mapillary-js/docs/theory/navigation-graph"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Navigation Graph Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#3d-coordinates" class="table-of-contents__link">3D Coordinates</a><ul><li><a href="#geodetic-coordinates" class="table-of-contents__link">Geodetic Coordinates</a></li><li><a href="#local-topocentric-coordinates" class="table-of-contents__link">Local Topocentric Coordinates</a></li><li><a href="#conversion" class="table-of-contents__link">Conversion</a></li><li><a href="#local-camera-coordinates" class="table-of-contents__link">Local Camera Coordinates</a></li></ul></li><li><a href="#2d-coordinates" class="table-of-contents__link">2D Coordinates</a><ul><li><a href="#container-pixel-coordinates" class="table-of-contents__link">Container Pixel Coordinates</a></li><li><a href="#basic-image-coordinates" class="table-of-contents__link">Basic Image Coordinates</a></li></ul></li><li><a href="#additional-information" class="table-of-contents__link">Additional Information</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/main/guide">Main Concepts</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/extension/extend">Extension</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/api">API Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/examples">Examples</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/theory/theory">Theory</a></li><li class="footer__item"><a class="footer__link-item" href="/mapillary-js/docs/migration/v4">Migration</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/mapillary/mapillary-js" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/mapillary-js/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/mapillary-js/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2024 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mapillary-js/assets/js/runtime~main.5ac90abc.js"></script>
<script src="/mapillary-js/assets/js/main.8e27731d.js"></script>
</body>
</html>